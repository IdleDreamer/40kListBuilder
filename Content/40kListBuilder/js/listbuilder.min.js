!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).listbuilder=t()}}(function(){return function(){return function t(e,i,s){function n(a,d){if(!i[a]){if(!e[a]){var r="function"==typeof require&&require;if(!d&&r)return r(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return n(i||t)},c,c.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}}()({1:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../data/factions")),o=s(t("../settings")),a=function(){function t(t,e){this.filesLoaded=0,this.success=t,this.failure=e,this.data={}}return t.prototype.loadFactionData=function(){var t=this,e=function(e){if(o.default.supportedFactions.indexOf(e)>-1){var i=n.default[e].dataFile,s=new XMLHttpRequest;s.onload=function(){t.onFileLoaded(e,JSON.parse(s.response))},s.onerror=function(){t.onFileFailed()},s.open("get","/Content/40kListBuilder/resources/data/"+i),s.send()}};for(var i in n.default)e(i)},t.prototype.onFileLoaded=function(t,e){this.filesLoaded++,this.data[t]=e,this.filesLoaded===o.default.supportedFactions.length&&this.success()},t.prototype.onFileFailed=function(){this.failure()},t}();i.default=a},{"../data/factions":2,"../settings":11}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default={"Adeptus Custodes":{dataFile:"AdeptusCustodes.json",icon:"talonsoftheemperor.png"},"Adeptus Mechanicus":{dataFile:"AdeptusMechanicus.json",icon:"adeptusmechanicus.png"},"Astra Militarum":{dataFile:"AstraMilitarum.json",icon:"astramilitarum.png"},"Blood Angels":{dataFile:"BloodAngles.json",icon:"bloodangels.png"},"Chaos Daemons":{dataFile:"Chaosaemons.json",icon:"chaosdaemons.png"},"Chaos Space Marines":{dataFile:"ChaosSpaceMarines.json",icon:"chaosdaemons.png"},Craftworlds:{dataFile:"Craftworlds.json",icon:"craftworld.png"},"Dark Angels":{dataFile:"DarkAngles.json",icon:"darkangels.png"},"Death Guard":{dataFile:"DeathGuard.json",icon:"deathwatch.png"},Deathwatch:{dataFile:"Deathwatch.json",icon:"hereticastartes.png"},Drukhari:{dataFile:"Drukhari.json",icon:"drukhari.png"},"Grey Knights":{dataFile:"GreyKnights.json",icon:"greyknights.png"},Harlequins:{dataFile:"Harlequins.json",icon:"harlequins.png"},"Imperial Knights":{dataFile:"ImperialKnights.json",icon:"imperialknights.png"},Necrons:{dataFile:"Necrons.json",icon:"necrons.png"},Orks:{dataFile:"Orks.json",icon:"orks.png"},"Space Marines":{dataFile:"SpaceMarines.json",icon:"spacemarines.png"},"T'au Empire":{dataFile:"TauEmpire.json",icon:"tau.png"},"Thousand Sons":{dataFile:"ThousandSons.json",icon:"hereticastartes.png"},Tyranids:{dataFile:"Tyranids.json",icon:"tyranids.png"},Ynnari:{dataFile:"Ynnari.json",icon:"ynnari.png"}}},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(){this.editorContainerHTML=document.getElementById("editor"),this.editorHTML=document.getElementById("editorForm"),this.editorContainerHTML.style.width="0px",this.unit={}}return t.prototype.editUnit=function(t){var e=window.list.armyList.listContents;for(var i in e)for(var s in e[i])if(e[i][s].id===t){this.unit=e[i][s],this.renderEdit();break}},t.prototype.addModel=function(t){this.unit.addModel(t)},t.prototype.removeModel=function(t){this.unit.removeModel(t)},t.prototype.editLoadout=function(t){var e=t.split("-");this.unit.updateModelWargear(e[0],e[1],e[2])},t.prototype.editAllegiance=function(t){this.unit.updateAllegiance(t)},t.prototype.closeEdit=function(){this.editorContainerHTML.style.width="0px",window.list.armyList.updateCosts(),window.list.armyList.renderList()},t.prototype.renderEdit=function(){this.editorContainerHTML.style.width="100%";var t=this.editorHTML.innerHTML;t="",t+='<table class="editTable">',t+=this.getUnitNameAndCostHTML(this.unit);for(var e=this.unit.unitInfo.modelTypes[0].maxAmount,i=this.unit.unitInfo.modelTypes[0].defaultAmount,s=0,n=0;n<this.unit.unitInfo.modelTypes.length;n++)s+=this.unit.models[this.unit.unitInfo.modelTypes[n].model].length;for(n=0;n<this.unit.unitInfo.modelTypes.length;n++){t+=this.getModelTypeHTML(this.unit.unitInfo.modelTypes[n].model);var o=this.unit.models[this.unit.unitInfo.modelTypes[n].model],a=this.unit.unitInfo.modelTypes[n].maxAmount;if(o){for(var d in o)t+=this.unit.getStatsHeadersHTML(),t+=this.getModelStatsHTML(this.unit,o[d]),t+=this.unit.getWeaponsHeadersHTML(),t+=this.getWeaponsHTML(o[d],this.unit.faction),t+=this.getWeaponLoadoutSelectionHTML(n,d,o[d]),t+=this.getSeperatorHTML();var r=s<e&&o.length<a,l=s>i&&o.length>0;t+=this.getButtonRowHTML(r,l,n),t+=this.getSeperatorHTML()}}var c=this.getAllegianceHTML(this.unit);""!==c&&(t+='<tr><td class="modelType" colspan="11">Allegiance</td></tr>',t+=c),t+="</table>",t+='<button class="closeButton" type="button" onclick="list.editor.closeEdit()">Done</button>',this.editorHTML.innerHTML=t},t.prototype.getUnitNameAndCostHTML=function(t){var e="Points: "+t.totalPoints+" | Power: "+t.totalPower+" | Wounds: "+t.totalWounds+" | Models: "+t.totalModels;return'<tr><td class="name" colspan="5">'+t.name+'</td><td class="cost" colspan="6">'+e+"</td></tr>"},t.prototype.getModelTypeHTML=function(t){return'<tr><td class="modelType" colspan="11">'+t+"(s)</td></tr>"},t.prototype.getButtonRowHTML=function(t,e,i){var s="'"+i+"'",n='<tr><td colspan="11">';return t&&(n+='<button class="add" type="button" onclick="list.editor.addModel('+s+')">Add</button>'),e&&(n+='<button class="remove" type="button" onclick="list.editor.removeModel('+s+')">Remove</button>'),n+="</td></tr>"},t.prototype.getModelStatsHTML=function(t,e){var i="";return i+='<tr><td class="stat" id="name">'+e.name+'</td><td class="stat" id="m">'+t.getUnProfiledStats(e.modelInfo.M)+'</td><td class="stat" id="ws">'+t.getUnProfiledStats(e.modelInfo.WS)+'</td><td class="stat" id="bs">'+t.getUnProfiledStats(e.modelInfo.BS)+'</td><td class="stat" id="s">'+t.getUnProfiledStats(e.modelInfo.S)+'</td><td class="stat" id="t">'+t.getUnProfiledStats(e.modelInfo.T)+'</td><td class="stat" id="w">'+t.getUnProfiledStats(e.modelInfo.W)+'</td><td class="stat" id="a">'+t.getUnProfiledStats(e.modelInfo.A)+'</td><td class="stat" id="ld">'+t.getUnProfiledStats(e.modelInfo.Ld)+'</td><td class="stat" id="sv">'+t.getUnProfiledStats(e.modelInfo.Sv)+"</td><td></td></tr>"},t.prototype.getWeaponsHTML=function(t,e){for(var i="",s=0,n=t.modelInfo.Wargear.weapons[t.selectedWeaponConfig];s<n.length;s++){var o=n[s],a=window.list.data.data[e].wargear[o];if(void 0!==a)if(void 0!==a.WargearAbility)i+='<tr><td class="stat" id="name">'+o+'</td><td class="stat" id="abilities" colspan="9">'+a.WargearAbility+"</td></tr>";else if(void 0===a.profiles)i+='<tr><td class="stat" id="name">'+o+'</td><td class="stat" id="range">'+a.Range+'</td><td class="stat" id="type">'+a.Type+'</td><td class="stat" id="s">'+a.S+'</td><td class="stat" id="ap">'+a.AP+'</td><td class="stat" id="d">'+a.D+'</td><td class="stat" id="abilities" colspan="4">'+a.Abilities+"</td></tr>";else{var d=void 0===a.description?"":a.description;for(var r in i+='<tr class="profiledWeapon"><td class="stat" id="name">'+o+'</td><td class="stat" id="description" colspan="9">'+d+"</td></tr>",a.profiles){var l=a.profiles[r];void 0!==l&&(i+='<tr class="profile"><td class="stat" id="name"> - '+r+'</td><td class="stat" id="range">'+l.Range+'</td><td class="stat" id="type">'+l.Type+'</td><td class="stat" id="s">'+l.S+'</td><td class="stat" id="ap">'+l.AP+'</td><td class="stat" id="d">'+l.D+'</td><td class="stat" id="abilities" colspan="4">'+l.Abilities+"</td></tr>")}}}return i},t.prototype.getWeaponLoadoutSelectionHTML=function(t,e,i){var s=t+"-"+e+"-",n="";n+='<tr><td colspan="11"><select onchange="window.list.editor.editLoadout(value);">';for(var o=i.modelInfo.Wargear.weapons.length,a=i.selectedWeaponConfig,d=0;d<o;d++){for(var r=i.modelInfo.Wargear.weapons[d],l=0,c=0;c<r.length;c++)l+=window.list.data.data[this.unit.faction].wargear[r[c]].Points;n+=d==a?'<option value="'+s+d+'" selected="selected">'+this.formatWeaponsList(i.modelInfo.Wargear.weapons[d])+" ("+l+" pnts)</option>":'<option value="'+s+d+'">'+this.formatWeaponsList(i.modelInfo.Wargear.weapons[d])+" ("+l+" pnts)</option>"}return n+="</select></td></tr>"},t.prototype.formatWeaponsList=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i!==t.length-1&&(e+=" | ");return e},t.prototype.getAllegianceHTML=function(t){var e="";for(var i in t.models)if(t.models[i].length>0){var s=t.models[i][0].modelInfo.Allegiance;if(void 0!==s){var n=t.models[i][0].selectedAllegiance;e+='<tr><td colspan="11"><select onchange="window.list.editor.editAllegiance(value);">';for(var o=0;o<s.length;o++)e+=o==n?'<option selected="selected" value="'+o+'">'+s[o]+"</option>":'<option value="'+o+'">'+s[o]+"</option>";return e+="</select></td></tr>"}}return e},t.prototype.getSeperatorHTML=function(){return'<tr><td class="seperator" colspan="11"><hr/></td></tr>'},t}();i.default=s},{}],4:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../src/data/dataController")),o=s(t("../src/utils/costController")),a=s(t("../src/lists/factionList")),d=s(t("../src/lists/unitList")),r=s(t("../src/lists/armyList")),l=s(t("../src/editor/editor")),c=function(){function t(){this.costs=new o.default,this.factionList=new a.default,this.unitList=new d.default,this.armyList=new r.default,this.editor=new l.default,this.data=new n.default(this.setup,this.loadingFailure)}return t.prototype.loadFactionData=function(){this.data.loadFactionData()},t.prototype.setup=function(){window.list.costs.init(),window.list.factionList.init()},t.prototype.loadingFailure=function(){alert("Faction data failed to load :(")},t}();i.default=c;var u=new c;u.loadFactionData(),window.list=u},{"../src/data/dataController":1,"../src/editor/editor":3,"../src/lists/armyList":5,"../src/lists/factionList":6,"../src/lists/unitList":7,"../src/utils/costController":12}],5:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../objects/unit")),o=function(){function t(){this.listContents={HQ:[],Troops:[],Elites:[],"Fast Attack":[],"Heavy Support":[],"Dedicated Transport":[],Flyer:[],Fortification:[],"Lord Of War":[]},this.currentUnits=0}return t.prototype.addUnit=function(t,e,i){this.listContents[e].push(new n.default(this.currentUnits,t,e,i)),this.currentUnits++,this.updateCosts(),this.renderList()},t.prototype.removeUnit=function(t){for(var e in this.listContents){var i=[];for(var s in this.listContents[e])this.listContents[e][s].id!==t&&i.push(this.listContents[e][s]);this.listContents[e]=i}this.updateCosts(),this.renderList()},t.prototype.addSmiteSpell=function(){},t.prototype.addFactionSpells=function(t,e){},t.prototype.updateCosts=function(){var t=0,e=0,i=0,s=0;for(var n in this.listContents)for(var o=0,a=this.listContents[n];o<a.length;o++){var d=a[o];null!==d&&(t+=d.totalPower,e+=d.totalPoints,i+=d.totalWounds,s+=d.totalModels)}window.list.costs.updateCostsExt([e,t,i,s])},t.prototype.renderList=function(){var t=document.getElementById("newListContents");for(var e in t.innerHTML="",this.listContents){if(this.listContents[e].length>0){var i=this.getImageName(e);t.innerHTML+='<div id="typeHeader"><img src="/Content/40kListBuilder/resources/icons/'+i+'"/><h1>'+e+"</h1></div>"}for(var s=0;s<this.listContents[e].length;s++)if(null!==this.listContents[e][s]){var n=this.listContents[e][s],o=document.createElement("table");o.className="unitTable",o.id=""+n.id,o.innerHTML+=n.getUnitNameAndCostHTML(),o.innerHTML+=n.getStatsHeadersHTML(),o.innerHTML+=n.getStatsHTML(),o.innerHTML+=n.getWeaponsHeadersHTML(),o.innerHTML+=n.getWeaponsHTML(),o.innerHTML+=n.getAbilitiesHTML(),o.innerHTML+=n.getPsykerHTML(),o.innerHTML+=n.getAllegianceHTML(),o.innerHTML+=n.getKeywordsHTML(),t.appendChild(o),t.appendChild(this.getUnitControls(n.id)),t.innerHTML+='<div class="clear"</div>'}}var a=document.createElement("div");a.className="spacer",t.appendChild(a)},t.prototype.getImageName=function(t){var e="";switch(t){case"HQ":e="hq.png";break;case"Troops":e="troops.png";break;case"Elites":e="elites.png";break;case"Fast Attack":e="fastattack.png";break;case"Heavy Support":e="heavysupport.png";break;case"Dedicated Transport":e="dedicatedtransport.png";break;case"Flyer":e="flyers.png";break;case"Fortification":e="fortifications.png";break;case"Lord Of War":e="lordofwar.png"}return e},t.prototype.getUnitControls=function(t){var e=document.createElement("ul");e.className="unitControls";var i=document.createElement("li");i.className="button",i.id="delete"+t,i.innerHTML='<img onclick="list.armyList.removeUnit('+t+')" src="/Content/40kListBuilder/resources/icons/delete.png"/>',e.appendChild(i);var s=document.createElement("li");return s.className="button",s.id="edit"+t,s.innerHTML='<img onclick="list.editor.editUnit('+t+')" src="/Content/40kListBuilder/resources/icons/edit.png"/>',e.appendChild(s),e},t}();i.default=o},{"../objects/unit":10}],6:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../data/factions")),o=s(t("../settings")),a=function(){function t(){this.open=!1,this.menuBtn=document.getElementById("factionBtn"),this.factionList=document.getElementById("factionList")}return t.prototype.init=function(){this.setupFactionList()},t.prototype.openNav=function(){document.getElementById("sidenav").style.width="350px",document.getElementById("availableList").style.marginLeft="350px",document.getElementById("newList").style.paddingLeft="700px",this.open=!0},t.prototype.closeNav=function(){document.getElementById("sidenav").style.width="60px",document.getElementById("availableList").style.marginLeft="60px",document.getElementById("newList").style.paddingLeft="410px",this.open=!1},t.prototype.toggleNav=function(){this.open?this.closeNav():this.openNav()},t.prototype.isOpen=function(){return this.open},t.prototype.setupFactionList=function(){var t=this;for(var e in this.menuBtn.onclick=function(){t.toggleNav()},this.isOpen()||this.openNav(),n.default)-1!==o.default.supportedFactions.indexOf(e)&&this.factionList.appendChild(this.createFactionListElement(e,!0));for(var e in n.default)-1===o.default.supportedFactions.indexOf(e)&&this.factionList.appendChild(this.createFactionListElement(e,!1))},t.prototype.createFactionListElement=function(t,e){var i=this,s=document.createElement("li");return s.id=t,e||(s.className="factionNotSupported"),s.onclick=function(){i.factionSelected(t)},s.innerHTML='<img src="Content/40kListBuilder/resources/icons/'+n.default[t].icon+'"/>'+t,s},t.prototype.factionSelected=function(t){window.list.unitList.factionSelected(t),this.isOpen()&&this.closeNav()},t}();i.default=a},{"../data/factions":2,"../settings":11}],7:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../objects/availableUnit")),o=function(){function t(){this.currentFaction="",this.availableList=[]}return t.prototype.factionSelected=function(t){this.availableList=[],this.currentFaction=t;var e=window.list.data.data[t];for(var i in e.units){var s=e.units[i];for(var o in s)this.availableList.push(new n.default(t,i,o))}this.renderList()},t.prototype.renderList=function(){var t=this,e=document.getElementById("availableList");e.innerHTML="<h2>"+this.currentFaction+"</h2>";for(var i=document.createElement("ul"),s=document.createElement("ul"),n="",o=document.createElement("li"),a=function(t){t.type!==n&&(""!==n&&(i.appendChild(s),s=document.createElement("ul")),s.innerHTML=t.type+"<hr/>",n=t.type),(o=document.createElement("li")).onclick=function(){window.list.armyList.addUnit(t.faction,t.type,t.name)},o.innerHTML=t.name+'<br/><div id="unitDetails"><table><tr><td>Points: '+t.points+"</td><td>Power: "+t.power+"</td><td>Wounds: "+t.wounds+"</td><td>Models: "+t.models+"</td></tr></table></div>",s.appendChild(o)},d=0,r=this.availableList;d<r.length;d++){a(r[d])}if(i.appendChild(s),void 0!==window.list.data.data[this.currentFaction].spells){var l=document.createElement("ul");l.innerHTML="Spells<hr/>";var c=document.createElement("li");c.id="smite",c.onclick=function(){window.list.armyList.addSmiteSpell()},c.innerHTML="Smite",l.appendChild(c);var u=function(e){var i=p.currentFaction+"-"+e,s=document.createElement("li");s.id=i,s.onclick=function(){window.list.armyList.addFactionSpells(t.currentFaction,e)},s.innerHTML=e,l.appendChild(s)},p=this;for(var f in window.list.data.data[this.currentFaction].spells)u(f);i.appendChild(l)}e.appendChild(i);var h=document.createElement("div");h.className="spacer",e.appendChild(h)},t}();i.default=o},{"../objects/availableUnit":8}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e,i){this.faction=t,this.type=e,this.name=i,this.unitInfo=window.list.data.data[t].units[e][i],this.points=this.getPointsValue(),this.power=this.getPowerValue(),this.wounds=this.getWoundsValue(),this.models=this.getModelsValue()}return t.prototype.getPointsValue=function(){for(var t=0,e=0,i=this.unitInfo.modelTypes;e<i.length;e++){var s=i[e],n=0,o=window.list.data.data[this.faction].models[s.model];if(n+=o.Points,!o.PointsIncludesWargear&&o.Wargear.weapons)for(var a=0;a<o.Wargear.weapons[0].length;a++)n+=window.list.data.data[this.faction].wargear[o.Wargear.weapons[0][a]].Points;t+=n*s.defaultAmount}return t},t.prototype.getPowerValue=function(){var t=0;return t+=this.unitInfo.power[0][1]},t.prototype.getWoundsValue=function(){for(var t=0,e=0,i=this.unitInfo.modelTypes;e<i.length;e++){var s=i[e];t+=window.list.data.data[this.faction].models[s.model].W*s.defaultAmount}return t},t.prototype.getModelsValue=function(){for(var t=0,e=0,i=this.unitInfo.modelTypes;e<i.length;e++){t+=i[e].defaultAmount}return t},t}();i.default=s},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){return function(t,e){this.name=t,this.modelInfo=e,this.points=e.Points,this.selectedWeaponConfig=0,this.selectedAllegiance=0}}();i.default=s},{}],10:[function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var n=s(t("../objects/model")),o=function(){function t(t,e,i,s){this.id=t,this.faction=e,this.type=i,this.name=s,this.totalModels=0,this.totalPoints=0,this.totalPower=0,this.totalWounds=0,this.unitInfo=window.list.data.data[e].units[i][s],this.models={},this.setupDefaultModels(),this.updateCosts()}return t.prototype.getUnitNameAndCostHTML=function(){var t="Points: "+this.totalPoints+" | Power: "+this.totalPower+" | Wounds: "+this.totalWounds+" | Models: "+this.totalModels;return'<tr><td class="name" colspan="5">'+this.name+'</td><td class="cost" colspan="5">'+t+"</td></tr>"},t.prototype.getStatsHeadersHTML=function(){return'<tr><th class="statHeader" id="name_H">Name</th><th class="statHeader" id="m_H">M</th><th class="statHeader" id="ws_H">WS</th><th class="statHeader" id="bs_H">BS</th><th class="statHeader" id="s_H">S</th><th class="statHeader" id="t_H">T</th><th class="statHeader" id="w_H">W</th><th class="statHeader" id="a_H">A</th><th class="statHeader" id="ld_H">Ld</th><th class="statHeader" id="sv_H">Sv</th></tr>'},t.prototype.getStatsHTML=function(){var t="";for(var e in this.models)if(this.models[e].length>0){var i=this.models[e][0],s="";this.models[e].length>1&&(s=" ("+this.models[e].length+")"),t+='<tr><td class="stat" id="name">'+i.name+s+'</td><td class="stat" id="m">'+this.getUnProfiledStats(i.modelInfo.M)+'</td><td class="stat" id="ws">'+this.getUnProfiledStats(i.modelInfo.WS)+'</td><td class="stat" id="bs">'+this.getUnProfiledStats(i.modelInfo.BS)+'</td><td class="stat" id="s">'+this.getUnProfiledStats(i.modelInfo.S)+'</td><td class="stat" id="t">'+this.getUnProfiledStats(i.modelInfo.T)+'</td><td class="stat" id="w">'+this.getUnProfiledStats(i.modelInfo.W)+'</td><td class="stat" id="a">'+this.getUnProfiledStats(i.modelInfo.A)+'</td><td class="stat" id="ld">'+this.getUnProfiledStats(i.modelInfo.Ld)+'</td><td class="stat" id="sv">'+this.getUnProfiledStats(i.modelInfo.Sv)+"</td></tr>"}return t},t.prototype.getUnProfiledStats=function(t){if("string"==typeof t||"number"==typeof t)return t;for(var e="",i=0;i<t.length;i++)e+="<b>"+t[i].value+"</b> ("+t[i].Wounds[0]+"-"+t[i].Wounds[1]+")<br/>";return e},t.prototype.getWeaponsHeadersHTML=function(){return'<tr><th class="leftHeader">Weapon</th><th>Range</th><th>Type</th><th>S</th><th>AP</th><th>D</th><th colspan="4">Abilities</th></tr>'},t.prototype.getWeaponsHTML=function(){var t=[],e=[],i="";for(var s in this.models)for(var n=0;n<this.models[s].length;n++){var o=this.models[s][n].modelInfo.Wargear.weapons[this.models[s][n].selectedWeaponConfig];for(var a in o)-1===t.indexOf(o[a])?(t.push(o[a]),e.push(1)):e[t.indexOf(o[a])]++}for(var d in t){a=t[d];var r=window.list.data.data[this.faction].wargear[a],l="";if(e[d]>1&&(l=" ("+e[d]+")"),void 0!==r)if(void 0!==r.WargearAbility)i+='<tr><td class="stat" id="name">'+a+'</td><td class="stat" id="abilities" colspan="9">'+r.WargearAbility+"</td></tr>";else if(void 0===r.profiles)i+='<tr><td class="stat" id="name">'+a+l+'</td><td class="stat" id="range">'+r.Range+'</td><td class="stat" id="type">'+r.Type+'</td><td class="stat" id="s">'+r.S+'</td><td class="stat" id="ap">'+r.AP+'</td><td class="stat" id="d">'+r.D+'</td><td class="stat" id="abilities" colspan="4">'+r.Abilities+"</td></tr>";else{var c=void 0===r.description?"":r.description;for(var u in i+='<tr class="profiledWeapon"><td class="stat" id="name">'+a+'</td><td class="stat" id="description" colspan="9">'+c+"</td></tr>",r.profiles){var p=r.profiles[u];void 0!==p&&(i+='<tr class="profile"><td class="stat" id="name"> - '+u+'</td><td class="stat" id="range">'+p.Range+'</td><td class="stat" id="type">'+p.Type+'</td><td class="stat" id="s">'+p.S+'</td><td class="stat" id="ap">'+p.AP+'</td><td class="stat" id="d">'+p.D+'</td><td class="stat" id="abilities" colspan="4">'+p.Abilities+"</td></tr>")}}}return i},t.prototype.getAbilitiesHTML=function(){var t='<tr class="abilities"><th>Abilities</th><td colspan="9">',e=[];for(var i in this.models)for(var s=0;s<this.models[i].length;s++){var n=this.models[i][s].modelInfo.Abilities;for(var o in n)if("string"!=typeof n[o])for(var a in n[o]){var d=this.getFactionAbility(a);-1===e.indexOf(d)&&e.push(d)}else{d="<b>"+o+":</b> "+this.models[i][s].modelInfo.Abilities[o]+"<br/>";-1===e.indexOf(d)&&e.push(d)}}for(s=0;s<e.length;s++)t+=e[s],s<e.length-1&&(t+="<br/>");return t+="</td></tr>"},t.prototype.getFactionAbility=function(t){return"<b>"+window.list.data.data[this.faction].factionSpecialRules[t].name+"</b>: "+window.list.data.data[this.faction].factionSpecialRules[t].description+"<br/>"},t.prototype.getPsykerHTML=function(){var t="";for(var e in this.models)this.models[e].length>0&&void 0!==this.models[e][0].modelInfo.Psyker&&(t+='<tr class="psykerAbilities"><th>Psyker</th><td colspan="9">'+this.models[e][0].modelInfo.Psyker+"</td></tr>");return t},t.prototype.getAllegianceHTML=function(){var t="";for(var e in this.models)if(this.models[e].length>0&&void 0!==this.models[e][0].modelInfo.Allegiance)return t+='<tr class="allegiance"><th>Allegiance</th><td colspan="9">'+this.models[e][0].modelInfo.Allegiance[this.models[e][0].selectedAllegiance]+"</td></tr>";return""},t.prototype.getKeywordsHTML=function(){var t=[];for(var e in this.models)if(this.models[e].length>0){for(var i=0;i<this.models[e][0].modelInfo["Faction Keywords"].length;i++){var s=this.models[e][0].modelInfo["Faction Keywords"][i].toUpperCase();-1===t.indexOf(s)&&t.push(s)}for(i=0;i<this.models[e][0].modelInfo.Keywords.length;i++){s=this.models[e][0].modelInfo.Keywords[i].toUpperCase();-1===t.indexOf(s)&&t.push(s)}}for(var n='<tr class="keywords"><th>Keywords</th><td colspan="9">',o=0,a=t;o<a.length;o++){s=a[o];t.indexOf(s)<t.length-1?n+=s+", ":n+=s}return n+="</td></tr>"},t.prototype.updateCosts=function(){this.calculateModels(),this.calculateWounds(),this.calculatePoints(),this.calculatePower()},t.prototype.addModel=function(t){var e=this.unitInfo.modelTypes[t].model,i=window.list.data.data[this.faction].models[e];if(void 0!==i){var s=new n.default(e,i);this.models[e].push(s)}this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.removeModel=function(t){var e=this.unitInfo.modelTypes[t].model;this.models[e].length>1?this.models[e].pop():this.models[e]=[],this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.updateModelWargear=function(t,e,i){var s=this.unitInfo.modelTypes[t].model;this.models[s][e].selectedWeaponConfig=i,this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.updateAllegiance=function(t){for(var e in this.models)for(var i in this.models[e]){this.models[e][i].selectedAllegiance=t}},t.prototype.calculateModels=function(){var t=0;for(var e in this.models)t+=this.models[e].length;this.totalModels=t},t.prototype.calculateWounds=function(){var t=0;for(var e in this.models)for(var i in this.models[e])t+=this.models[e][i].modelInfo.W;this.totalWounds=t},t.prototype.calculatePoints=function(){var t=0;for(var e in this.models)for(var i in this.models[e]){var s=this.models[e][i];if(t+=s.modelInfo.Points,!s.modelInfo.PointsIncludesWargear&&s.modelInfo.Wargear.weapons)for(var n=s.modelInfo.Wargear.weapons[s.selectedWeaponConfig],o=0;o<n.length;o++)t+=window.list.data.data[this.faction].wargear[n[o]].Points}this.totalPoints=t},t.prototype.calculatePower=function(){for(var t=0,e=this.unitInfo.power.length-1;e>=0;e--)if(this.totalModels>=this.unitInfo.power[e][0]){t=this.unitInfo.power[e][1];break}this.totalPower=t},t.prototype.setupDefaultModels=function(){for(var t in this.unitInfo.modelTypes){var e=this.unitInfo.modelTypes[t].model;this.models[e]=[];var i=window.list.data.data[this.faction].models[e];if(void 0!==i)for(var s=0;s<this.unitInfo.modelTypes[t].defaultAmount;s++){var o=new n.default(e,i);this.models[e].push(o)}}},t}();i.default=o},{"../objects/model":9}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default={supportedFactions:["Craftworlds","Harlequins","Ynnari"]}},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(){this.costs=[0,0,0,0],this.pointsElement=document.getElementById("POINTS"),this.powerElement=document.getElementById("POWER"),this.woundsElement=document.getElementById("WOUNDS"),this.modelsElement=document.getElementById("MODELS")}return t.prototype.init=function(){this.updateCosts()},t.prototype.updateCostsExt=function(t){this.costs[0]=t[0],this.costs[1]=t[1],this.costs[2]=t[2],this.costs[3]=t[3],this.updateCosts()},t.prototype.updateCosts=function(){this.pointsElement.innerHTML='<div class="costValue">'+this.costs[0]+"</div>POINTS",this.powerElement.innerHTML='<div class="displayedCostSmall">Power: '+this.costs[1]+"</div>",this.woundsElement.innerHTML='<div class="displayedCostSmall">Wounds: '+this.costs[2]+"</div>",this.modelsElement.innerHTML='<div class="displayedCostSmall">Models: '+this.costs[3]+"</div>"},t}();i.default=s},{}]},{},[4])(4)});
//# sourceMappingURL=listbuilder.min.js.map
