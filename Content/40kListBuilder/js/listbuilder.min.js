!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).listbuilder=t()}}(function(){return function(){return function t(e,s,i){function n(a,d){if(!s[a]){if(!e[a]){var r="function"==typeof require&&require;if(!d&&r)return r(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[a]={exports:{}};e[a][0].call(c.exports,function(t){var s=e[a][1][t];return n(s||t)},c,c.exports,t,e,s,i)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}}()({1:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../data/factions")),o=i(t("../settings")),a=function(){function t(t,e){this.filesLoaded=0,this.success=t,this.failure=e,this.data={}}return t.prototype.loadFactionData=function(){var t=this,e=function(e){if(o.default.supportedFactions.indexOf(e)>-1){var s=n.default[e].dataFile,i=new XMLHttpRequest;i.onload=function(){t.onFileLoaded(e,JSON.parse(i.response))},i.onerror=function(){t.onFileFailed()},i.open("get","/Content/40kListBuilder/resources/data/"+s),i.send()}};for(var s in n.default)e(s)},t.prototype.onFileLoaded=function(t,e){this.filesLoaded++,this.data[t]=e,this.filesLoaded===o.default.supportedFactions.length&&this.success()},t.prototype.onFileFailed=function(){this.failure()},t}();s.default=a},{"../data/factions":2,"../settings":12}],2:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default={"Adeptus Custodes":{dataFile:"AdeptusCustodes.json",icon:"talonsoftheemperor.png"},"Adeptus Mechanicus":{dataFile:"AdeptusMechanicus.json",icon:"adeptusmechanicus.png"},"Astra Militarum":{dataFile:"AstraMilitarum.json",icon:"astramilitarum.png"},"Blood Angels":{dataFile:"BloodAngles.json",icon:"bloodangels.png"},"Chaos Daemons":{dataFile:"Chaosaemons.json",icon:"chaosdaemons.png"},"Chaos Space Marines":{dataFile:"ChaosSpaceMarines.json",icon:"chaosdaemons.png"},Craftworlds:{dataFile:"Craftworlds.json",icon:"craftworld.png"},"Dark Angels":{dataFile:"DarkAngles.json",icon:"darkangels.png"},"Death Guard":{dataFile:"DeathGuard.json",icon:"deathwatch.png"},Deathwatch:{dataFile:"Deathwatch.json",icon:"hereticastartes.png"},Drukhari:{dataFile:"Drukhari.json",icon:"drukhari.png"},"Grey Knights":{dataFile:"GreyKnights.json",icon:"greyknights.png"},Harlequins:{dataFile:"Harlequins.json",icon:"harlequins.png"},"Imperial Knights":{dataFile:"ImperialKnights.json",icon:"imperialknights.png"},Necrons:{dataFile:"Necrons.json",icon:"necrons.png"},Orks:{dataFile:"Orks.json",icon:"orks.png"},"Space Marines":{dataFile:"SpaceMarines.json",icon:"spacemarines.png"},"T'au Empire":{dataFile:"TauEmpire.json",icon:"tau.png"},"Thousand Sons":{dataFile:"ThousandSons.json",icon:"hereticastartes.png"},Tyranids:{dataFile:"Tyranids.json",icon:"tyranids.png"},Ynnari:{dataFile:"Ynnari.json",icon:"ynnari.png"}}},{}],3:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function t(){this.editorContainerHTML=document.getElementById("editor"),this.editorHTML=document.getElementById("editorForm"),this.editorContainerHTML.style.width="0px",this.unit={}}return t.prototype.editUnit=function(t){var e=window.list.armyList.listContents;for(var s in e)for(var i in e[s])if(e[s][i].id===t){this.unit=e[s][i],this.renderEdit();break}},t.prototype.addModel=function(t){this.unit.addModel(t)},t.prototype.removeModel=function(t){this.unit.removeModel(t)},t.prototype.editLoadout=function(t){var e=t.split("-");this.unit.updateModelWargear(e[0],e[1],e[2],e[3])},t.prototype.editAllegiance=function(t){this.unit.updateAllegiance(t)},t.prototype.closeEdit=function(){this.editorContainerHTML.style.width="0px",window.list.armyList.updateCosts(),window.list.armyList.renderList()},t.prototype.renderEdit=function(){this.editorContainerHTML.style.width="100%";var t=this.editorHTML.innerHTML;t="",t+='<table class="editTable">',t+=this.getUnitNameAndCostHTML(this.unit);for(var e=this.unit.unitInfo.modelTypes[0].maxAmount,s=this.unit.unitInfo.modelTypes[0].defaultAmount,i=0,n=0;n<this.unit.unitInfo.modelTypes.length;n++)i+=this.unit.models[this.unit.unitInfo.modelTypes[n].model].length;for(n=0;n<this.unit.unitInfo.modelTypes.length;n++){t+=this.getModelTypeHTML(this.unit.unitInfo.modelTypes[n].model);var o=this.unit.models[this.unit.unitInfo.modelTypes[n].model],a=this.unit.unitInfo.modelTypes[n].maxAmount;if(o){for(var d in o)t+=this.unit.getStatsHeadersHTML(),t+=this.getModelStatsHTML(this.unit,o[d]),t+=this.unit.getWeaponsHeadersHTML(),t+=this.getWeaponsHTML(o[d],this.unit.faction),t+=this.getWeaponLoadoutSelectionHTML(n,d,o[d]),t+=this.getSeperatorHTML();var r=i<e&&o.length<a,l=i>s&&o.length>0;t+=this.getButtonRowHTML(r,l,n),t+=this.getSeperatorHTML()}}var c=this.getAllegianceHTML(this.unit);""!==c&&(t+='<tr><td class="modelType" colspan="11">Allegiance</td></tr>',t+=c),t+="</table>",t+='<button class="closeButton" type="button" onclick="list.editor.closeEdit()">Done</button>',this.editorHTML.innerHTML=t},t.prototype.getUnitNameAndCostHTML=function(t){var e="Points: "+t.totalPoints+" | Power: "+t.totalPower+" | Wounds: "+t.totalWounds+" | Models: "+t.totalModels;return'<tr><td class="name" colspan="5">'+t.name+'</td><td class="cost" colspan="6">'+e+"</td></tr>"},t.prototype.getModelTypeHTML=function(t){return'<tr><td class="modelType" colspan="11">'+t+"(s)</td></tr>"},t.prototype.getButtonRowHTML=function(t,e,s){var i="'"+s+"'",n='<tr><td colspan="11">';return t&&(n+='<button class="add" type="button" onclick="list.editor.addModel('+i+')">Add</button>'),e&&(n+='<button class="remove" type="button" onclick="list.editor.removeModel('+i+')">Remove</button>'),n+="</td></tr>"},t.prototype.getModelStatsHTML=function(t,e){var s="";return s+='<tr><td class="stat" id="name">'+e.name+'</td><td class="stat" id="m">'+t.getUnProfiledStats(e.modelInfo.M)+'</td><td class="stat" id="ws">'+t.getUnProfiledStats(e.modelInfo.WS)+'</td><td class="stat" id="bs">'+t.getUnProfiledStats(e.modelInfo.BS)+'</td><td class="stat" id="s">'+t.getUnProfiledStats(e.modelInfo.S)+'</td><td class="stat" id="t">'+t.getUnProfiledStats(e.modelInfo.T)+'</td><td class="stat" id="w">'+t.getUnProfiledStats(e.modelInfo.W)+'</td><td class="stat" id="a">'+t.getUnProfiledStats(e.modelInfo.A)+'</td><td class="stat" id="ld">'+t.getUnProfiledStats(e.modelInfo.Ld)+'</td><td class="stat" id="sv">'+t.getUnProfiledStats(e.modelInfo.Sv)+"</td><td></td></tr>"},t.prototype.getWeaponsHTML=function(t,e){var s="",i=[];for(var n in t.modelInfo.Wargear)for(var o=t.selectedWeaponConfig[n]||0,a=0,d=t.modelInfo.Wargear[n][o];a<d.length;a++){var r=d[a];i.push(r)}for(var l=0,c=i;l<c.length;l++){var u=c[l],p=window.list.data.data[e].wargear[u];if(void 0!==p)if(void 0!==p.WargearAbility)s+='<tr><td class="stat" id="name">'+u+'</td><td class="stat" id="abilities" colspan="9">'+p.WargearAbility+"</td></tr>";else if(void 0===p.profiles)s+='<tr><td class="stat" id="name">'+u+'</td><td class="stat" id="range">'+p.Range+'</td><td class="stat" id="type">'+p.Type+'</td><td class="stat" id="s">'+p.S+'</td><td class="stat" id="ap">'+p.AP+'</td><td class="stat" id="d">'+p.D+'</td><td class="stat" id="abilities" colspan="4">'+p.Abilities+"</td></tr>";else{var f=void 0===p.description?"":p.description;for(var h in s+='<tr class="profiledWeapon"><td class="stat" id="name">'+u+'</td><td class="stat" id="description" colspan="9">'+f+"</td></tr>",p.profiles){var m=p.profiles[h];void 0!==m&&(s+='<tr class="profile"><td class="stat" id="name"> - '+h+'</td><td class="stat" id="range">'+m.Range+'</td><td class="stat" id="type">'+m.Type+'</td><td class="stat" id="s">'+m.S+'</td><td class="stat" id="ap">'+m.AP+'</td><td class="stat" id="d">'+m.D+'</td><td class="stat" id="abilities" colspan="4">'+m.Abilities+"</td></tr>")}}}return s},t.prototype.getWeaponLoadoutSelectionHTML=function(t,e,s){var i=t+"-"+e+"-",n='<tr><td colspan="11">';for(var o in s.modelInfo.Wargear){var a=i+o+"-",d=s.modelInfo.Wargear[o].length;if(d>1){var r=s.selectedWeaponConfig[o]||0;n+='<select onchange="window.list.editor.editLoadout(value);">';for(var l=0;l<d;l++){for(var c=s.modelInfo.Wargear[o][l],u=0,p=0;p<c.length;p++)u+=window.list.data.data[this.unit.faction].wargear[c[p]].Points;n+=l==r?'<option value="'+a+l+'" selected="selected">'+this.formatWeaponsList(s.modelInfo.Wargear[o][l],u)+"</option>":'<option value="'+a+l+'">'+this.formatWeaponsList(s.modelInfo.Wargear[o][l],u)+"</option>"}n+="</select>"}else{for(u=0,c=s.modelInfo.Wargear[o][0],p=0;p<c.length;p++)u+=window.list.data.data[this.unit.faction].wargear[c[p]].Points;n+='<div class="selectSingle">'+this.formatWeaponsList(s.modelInfo.Wargear[o][0],u)+"</div>"}}return n+="</td></tr>"},t.prototype.formatWeaponsList=function(t,e){for(var s="",i=0;i<t.length;i++)s+=t[i],i!==t.length-1&&(s+=" | ");return""!==s?s+=" ("+e+" pnts)":s="&lt;empty&gt;",s},t.prototype.getAllegianceHTML=function(t){var e="";for(var s in t.models)if(t.models[s].length>0){var i=t.models[s][0].modelInfo.Allegiance;if(void 0!==i){var n=t.models[s][0].selectedAllegiance;e+='<tr><td colspan="11"><select onchange="window.list.editor.editAllegiance(value);">';for(var o=0;o<i.length;o++)e+=o==n?'<option selected="selected" value="'+o+'">'+i[o]+"</option>":'<option value="'+o+'">'+i[o]+"</option>";return e+="</select></td></tr>"}}return e},t.prototype.getSeperatorHTML=function(){return'<tr><td class="seperator" colspan="11"><hr/></td></tr>'},t}();s.default=i},{}],4:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../src/data/dataController")),o=i(t("../src/utils/costController")),a=i(t("../src/lists/factionList")),d=i(t("../src/lists/unitList")),r=i(t("../src/lists/armyList")),l=i(t("../src/editor/editor")),c=function(){function t(){this.costs=new o.default,this.factionList=new a.default,this.unitList=new d.default,this.armyList=new r.default,this.editor=new l.default,this.data=new n.default(this.setup,this.loadingFailure)}return t.prototype.loadFactionData=function(){this.data.loadFactionData()},t.prototype.setup=function(){window.list.costs.init(),window.list.factionList.init()},t.prototype.loadingFailure=function(){alert("Faction data failed to load :(")},t}();s.default=c;var u=new c;u.loadFactionData(),window.list=u},{"../src/data/dataController":1,"../src/editor/editor":3,"../src/lists/armyList":5,"../src/lists/factionList":6,"../src/lists/unitList":7,"../src/utils/costController":13}],5:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../objects/unit")),o=i(t("../objects/spellList")),a=function(){function t(){this.listContents={HQ:[],Troops:[],Elites:[],"Fast Attack":[],"Heavy Support":[],"Dedicated Transport":[],Flyer:[],Fortification:[],"Lord Of War":[],Spells:[],Strategems:[],"Warlord Traits":[],"Warlord Wargear":[],Detachments:[],"Detachment Abilities":[],"Tactical Objectives":[]},this.currentUnits=0}return t.prototype.addUnit=function(t,e,s){this.listContents[e].push(new n.default(this.currentUnits,t,e,s)),this.currentUnits++,this.updateCosts(),this.renderList()},t.prototype.removeUnit=function(t){for(var e in this.listContents){var s=[];for(var i in this.listContents[e])this.listContents[e][i].id!==t&&s.push(this.listContents[e][i]);this.listContents[e]=s}this.updateCosts(),this.renderList()},t.prototype.addSmiteSpell=function(){this.listContents.Spells.push(new o.default("","Smite")),this.renderList()},t.prototype.addFactionSpells=function(t,e){this.listContents.Spells.push(new o.default(t,e)),this.renderList()},t.prototype.updateCosts=function(){var t=0,e=0,s=0,i=0;for(var n in this.listContents)for(var o=0,a=this.listContents[n];o<a.length;o++){var d=a[o];null!==d&&(t+=d.totalPower,e+=d.totalPoints,s+=d.totalWounds,i+=d.totalModels)}window.list.costs.updateCostsExt([e,t,s,i])},t.prototype.renderList=function(){var t=document.getElementById("newListContents");for(var e in t.innerHTML="",this.listContents){if(this.listContents[e].length>0){var s=this.getImageName(e);t.innerHTML+='<div id="typeHeader"><img src="/Content/40kListBuilder/resources/icons/'+s+'"/><h1>'+e+"</h1></div>"}if(this.listContents[e][0]&&this.listContents[e][0]instanceof n.default){for(var i=0;i<this.listContents[e].length;i++)if(null!==this.listContents[e][i]){var a=this.listContents[e][i],d=document.createElement("table");d.className="unitTable",d.id=""+a.id,d.innerHTML+=a.getUnitNameAndCostHTML(),d.innerHTML+=a.getStatsHeadersHTML(),d.innerHTML+=a.getStatsHTML(),d.innerHTML+=a.getWeaponsHeadersHTML(),d.innerHTML+=a.getWeaponsHTML(),d.innerHTML+=a.getAbilitiesHTML(),d.innerHTML+=a.getPsykerHTML(),d.innerHTML+=a.getAllegianceHTML(),d.innerHTML+=a.getKeywordsHTML(),t.appendChild(d),t.appendChild(this.getUnitControls(a.id)),t.innerHTML+='<div class="clear"</div>'}}else if(this.listContents[e][0]&&this.listContents[e][0]instanceof o.default)for(var r=0;r<this.listContents[e].length;r++)null!==this.listContents[e][r]&&t.appendChild(this.listContents[e][r].getSpellsHTML())}var l=document.createElement("div");l.className="spacer",t.appendChild(l)},t.prototype.getImageName=function(t){var e="";switch(t){case"HQ":e="hq.png";break;case"Troops":e="troops.png";break;case"Elites":e="elites.png";break;case"Fast Attack":e="fastattack.png";break;case"Heavy Support":e="heavysupport.png";break;case"Dedicated Transport":e="dedicatedtransport.png";break;case"Flyer":e="flyers.png";break;case"Fortification":e="fortifications.png";break;case"Lord Of War":e="lordofwar.png";break;case"Spells":e="spells.png"}return e},t.prototype.getUnitControls=function(t){var e=document.createElement("ul");e.className="unitControls";var s=document.createElement("li");s.className="button",s.id="delete"+t,s.innerHTML='<img onclick="list.armyList.removeUnit('+t+')" src="/Content/40kListBuilder/resources/icons/delete.png"/>',e.appendChild(s);var i=document.createElement("li");return i.className="button",i.id="edit"+t,i.innerHTML='<img onclick="list.editor.editUnit('+t+')" src="/Content/40kListBuilder/resources/icons/edit.png"/>',e.appendChild(i),e},t}();s.default=a},{"../objects/spellList":10,"../objects/unit":11}],6:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../data/factions")),o=i(t("../settings")),a=function(){function t(){this.open=!1,this.menuBtn=document.getElementById("factionBtn"),this.factionList=document.getElementById("factionList")}return t.prototype.init=function(){this.setupFactionList()},t.prototype.openNav=function(){document.getElementById("sidenav").style.width="350px",document.getElementById("availableList").style.marginLeft="350px",document.getElementById("newList").style.paddingLeft="700px",this.open=!0},t.prototype.closeNav=function(){document.getElementById("sidenav").style.width="60px",document.getElementById("availableList").style.marginLeft="60px",document.getElementById("newList").style.paddingLeft="410px",this.open=!1},t.prototype.toggleNav=function(){this.open?this.closeNav():this.openNav()},t.prototype.isOpen=function(){return this.open},t.prototype.setupFactionList=function(){var t=this;for(var e in this.menuBtn.onclick=function(){t.toggleNav()},this.isOpen()||this.openNav(),n.default)-1!==o.default.supportedFactions.indexOf(e)&&this.factionList.appendChild(this.createFactionListElement(e,!0));for(var e in n.default)-1===o.default.supportedFactions.indexOf(e)&&this.factionList.appendChild(this.createFactionListElement(e,!1))},t.prototype.createFactionListElement=function(t,e){var s=this,i=document.createElement("li");return i.id=t,e||(i.className="factionNotSupported"),i.onclick=function(){s.factionSelected(t)},i.innerHTML='<img src="/Content/40kListBuilder/resources/icons/'+n.default[t].icon+'"/>'+t,i},t.prototype.factionSelected=function(t){window.list.unitList.factionSelected(t),this.isOpen()&&this.closeNav()},t}();s.default=a},{"../data/factions":2,"../settings":12}],7:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../objects/availableUnit")),o=function(){function t(){this.currentFaction="",this.availableList=[]}return t.prototype.factionSelected=function(t){this.availableList=[],this.currentFaction=t;var e=window.list.data.data[t];for(var s in e.units){var i=e.units[s];for(var o in i)this.availableList.push(new n.default(t,s,o))}this.renderList()},t.prototype.renderList=function(){var t=this,e=document.getElementById("availableList");e.innerHTML="<h2>"+this.currentFaction+"</h2>";for(var s=document.createElement("ul"),i=document.createElement("ul"),n="",o=document.createElement("li"),a=function(t){t.type!==n&&(""!==n&&(s.appendChild(i),i=document.createElement("ul")),i.innerHTML=t.type+"<hr/>",n=t.type),(o=document.createElement("li")).onclick=function(){window.list.armyList.addUnit(t.faction,t.type,t.name)},o.innerHTML=t.name+'<br/><div id="unitDetails"><table><tr><td>Points: '+t.points+"</td><td>Power: "+t.power+"</td><td>Wounds: "+t.wounds+"</td><td>Models: "+t.models+"</td></tr></table></div>",i.appendChild(o)},d=0,r=this.availableList;d<r.length;d++){a(r[d])}if(s.appendChild(i),void 0!==window.list.data.data[this.currentFaction].spells){var l=document.createElement("ul");l.innerHTML="Spells<hr/>";var c=document.createElement("li");c.id="smite",c.onclick=function(){window.list.armyList.addSmiteSpell()},c.innerHTML="Smite",l.appendChild(c);var u=function(e){var s=p.currentFaction+"-"+e,i=document.createElement("li");i.id=s,i.onclick=function(){window.list.armyList.addFactionSpells(t.currentFaction,e)},i.innerHTML=e,l.appendChild(i)},p=this;for(var f in window.list.data.data[this.currentFaction].spells)u(f);s.appendChild(l)}e.appendChild(s);var h=document.createElement("div");h.className="spacer",e.appendChild(h)},t}();s.default=o},{"../objects/availableUnit":8}],8:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function t(t,e,s){this.faction=t,this.type=e,this.name=s,this.unitInfo=window.list.data.data[t].units[e][s],this.points=this.getPointsValue(),this.power=this.getPowerValue(),this.wounds=this.getWoundsValue(),this.models=this.getModelsValue()}return t.prototype.getPointsValue=function(){for(var t=0,e=0,s=this.unitInfo.modelTypes;e<s.length;e++){var i=s[e],n=0,o=window.list.data.data[this.faction].models[i.model];if(n+=o.Points,!o.PointsIncludesWargear)for(var a in o.Wargear)for(var d=0;d<o.Wargear[a][0].length;d++)n+=window.list.data.data[this.faction].wargear[o.Wargear[a][0][d]].Points;t+=n*i.defaultAmount}return t},t.prototype.getPowerValue=function(){var t=0;return t+=this.unitInfo.power[0][1]},t.prototype.getWoundsValue=function(){for(var t=0,e=0,s=this.unitInfo.modelTypes;e<s.length;e++){var i=s[e];t+=window.list.data.data[this.faction].models[i.model].W*i.defaultAmount}return t},t.prototype.getModelsValue=function(){for(var t=0,e=0,s=this.unitInfo.modelTypes;e<s.length;e++){t+=s[e].defaultAmount}return t},t}();s.default=i},{}],9:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){return function(t,e){this.name=t,this.modelInfo=e,this.points=e.Points,this.selectedWeaponConfig={},this.selectedAllegiance=0}}();s.default=i},{}],10:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function t(t,e){this.faction=t,this.spellsName=e,this.setSpellConfig()}return t.prototype.getSpellsHTML=function(){var t=document.createElement("table");for(var e in t.innerHTML='<tr><th class="spellHeader">'+this.spellsName+"</th></tr>",this.spellConfig)t.innerHTML+='<tr><td class="spellName">'+this.spellConfig[e].name+'</td><td class="spellDescription">'+this.spellConfig[e].description+"</td>";return t},t.prototype.setSpellConfig=function(){"Smite"===this.spellsName?this.spellConfig={1:{name:"Smite",description:'Smite has a warp charge value of 5. If manifested, the closest visible enemy unit within 18" of the psyker suffers D3 mortal wounds. If the result of the Psychic test was more than 10, the target suffers D6 mortal wounds instead.'}}:this.spellConfig=window.list.data.data[this.faction].spells[this.spellsName]},t}();s.default=i},{}],11:[function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var n=i(t("../objects/model")),o=function(){function t(t,e,s,i){this.id=t,this.faction=e,this.type=s,this.name=i,this.totalModels=0,this.totalPoints=0,this.totalPower=0,this.totalWounds=0,this.unitInfo=window.list.data.data[e].units[s][i],this.models={},this.setupDefaultModels(),this.updateCosts()}return t.prototype.getUnitNameAndCostHTML=function(){var t="Points: "+this.totalPoints+" | Power: "+this.totalPower+" | Wounds: "+this.totalWounds+" | Models: "+this.totalModels;return'<tr><td class="name" colspan="5">'+this.name+'</td><td class="cost" colspan="5">'+t+"</td></tr>"},t.prototype.getStatsHeadersHTML=function(){return'<tr><th class="statHeader" id="name_H">Name</th><th class="statHeader" id="m_H">M</th><th class="statHeader" id="ws_H">WS</th><th class="statHeader" id="bs_H">BS</th><th class="statHeader" id="s_H">S</th><th class="statHeader" id="t_H">T</th><th class="statHeader" id="w_H">W</th><th class="statHeader" id="a_H">A</th><th class="statHeader" id="ld_H">Ld</th><th class="statHeader" id="sv_H">Sv</th></tr>'},t.prototype.getStatsHTML=function(){var t="";for(var e in this.models)if(this.models[e].length>0){var s=this.models[e][0],i="";this.models[e].length>1&&(i=" ("+this.models[e].length+")"),t+='<tr><td class="stat" id="name">'+s.name+i+'</td><td class="stat" id="m">'+this.getUnProfiledStats(s.modelInfo.M)+'</td><td class="stat" id="ws">'+this.getUnProfiledStats(s.modelInfo.WS)+'</td><td class="stat" id="bs">'+this.getUnProfiledStats(s.modelInfo.BS)+'</td><td class="stat" id="s">'+this.getUnProfiledStats(s.modelInfo.S)+'</td><td class="stat" id="t">'+this.getUnProfiledStats(s.modelInfo.T)+'</td><td class="stat" id="w">'+this.getUnProfiledStats(s.modelInfo.W)+'</td><td class="stat" id="a">'+this.getUnProfiledStats(s.modelInfo.A)+'</td><td class="stat" id="ld">'+this.getUnProfiledStats(s.modelInfo.Ld)+'</td><td class="stat" id="sv">'+this.getUnProfiledStats(s.modelInfo.Sv)+"</td></tr>"}return t},t.prototype.getUnProfiledStats=function(t){if("string"==typeof t||"number"==typeof t)return t;for(var e="",s=0;s<t.length;s++)e+="<b>"+t[s].value+"</b> ("+t[s].Wounds[0]+"-"+t[s].Wounds[1]+")<br/>";return e},t.prototype.getWeaponsHeadersHTML=function(){return'<tr><th class="leftHeader">Wargear</th><th>Range</th><th>Type</th><th>S</th><th>AP</th><th>D</th><th colspan="4">Abilities</th></tr>'},t.prototype.getWeaponsHTML=function(){var t=[],e=[],s="";for(var i in this.models)for(var n=0;n<this.models[i].length;n++){var o=[],a=this.models[i][n].modelInfo.Wargear;for(var d in a)for(var r=this.models[i][n].selectedWeaponConfig[d]||0,l=0,c=a[d][r];l<c.length;l++){var u=c[l];o.push(u)}for(var p in o)-1===t.indexOf(o[p])?(t.push(o[p]),e.push(1)):e[t.indexOf(o[p])]++}for(var f in t){p=t[f];var h=window.list.data.data[this.faction].wargear[p],m="";if(e[f]>1&&(m=" ("+e[f]+")"),void 0!==h)if(void 0!==h.WargearAbility)s+='<tr><td class="stat" id="name">'+p+'</td><td class="stat" id="abilities" colspan="9">'+h.WargearAbility+"</td></tr>";else if(void 0===h.profiles)s+='<tr><td class="stat" id="name">'+p+m+'</td><td class="stat" id="range">'+h.Range+'</td><td class="stat" id="type">'+h.Type+'</td><td class="stat" id="s">'+h.S+'</td><td class="stat" id="ap">'+h.AP+'</td><td class="stat" id="d">'+h.D+'</td><td class="stat" id="abilities" colspan="4">'+h.Abilities+"</td></tr>";else{var g=void 0===h.description?"":h.description;for(var v in s+='<tr class="profiledWeapon"><td class="stat" id="name">'+p+'</td><td class="stat" id="description" colspan="9">'+g+"</td></tr>",h.profiles){var y=h.profiles[v];void 0!==y&&(s+='<tr class="profile"><td class="stat" id="name"> - '+v+'</td><td class="stat" id="range">'+y.Range+'</td><td class="stat" id="type">'+y.Type+'</td><td class="stat" id="s">'+y.S+'</td><td class="stat" id="ap">'+y.AP+'</td><td class="stat" id="d">'+y.D+'</td><td class="stat" id="abilities" colspan="4">'+y.Abilities+"</td></tr>")}}}return s},t.prototype.getAbilitiesHTML=function(){var t='<tr class="abilities"><th>Abilities</th><td colspan="9">',e=[];for(var s in this.models)for(var i=0;i<this.models[s].length;i++){var n=this.models[s][i].modelInfo.Abilities;for(var o in n)if("string"!=typeof n[o])for(var a in n[o]){var d=this.getFactionAbility(a);-1===e.indexOf(d)&&e.push(d)}else{d="<b>"+o+":</b> "+this.models[s][i].modelInfo.Abilities[o]+"<br/>";-1===e.indexOf(d)&&e.push(d)}}for(i=0;i<e.length;i++)t+=e[i],i<e.length-1&&(t+="<br/>");return t+="</td></tr>"},t.prototype.getFactionAbility=function(t){return"<b>"+window.list.data.data[this.faction].factionSpecialRules[t].name+"</b>: "+window.list.data.data[this.faction].factionSpecialRules[t].description+"<br/>"},t.prototype.getPsykerHTML=function(){var t="";for(var e in this.models)this.models[e].length>0&&void 0!==this.models[e][0].modelInfo.Psyker&&(t+='<tr class="psykerAbilities"><th>Psyker</th><td colspan="9">'+this.models[e][0].modelInfo.Psyker+"</td></tr>");return t},t.prototype.getAllegianceHTML=function(){var t="";for(var e in this.models)if(this.models[e].length>0&&void 0!==this.models[e][0].modelInfo.Allegiance)return t+='<tr class="allegiance"><th>Allegiance</th><td colspan="9">'+this.models[e][0].modelInfo.Allegiance[this.models[e][0].selectedAllegiance]+"</td></tr>";return""},t.prototype.getKeywordsHTML=function(){var t=[];for(var e in this.models)if(this.models[e].length>0){for(var s=0;s<this.models[e][0].modelInfo["Faction Keywords"].length;s++){var i=this.models[e][0].modelInfo["Faction Keywords"][s].toUpperCase();-1===t.indexOf(i)&&t.push(i)}for(s=0;s<this.models[e][0].modelInfo.Keywords.length;s++){i=this.models[e][0].modelInfo.Keywords[s].toUpperCase();-1===t.indexOf(i)&&t.push(i)}}for(var n='<tr class="keywords"><th>Keywords</th><td colspan="9">',o=0,a=t;o<a.length;o++){i=a[o];t.indexOf(i)<t.length-1?n+=i+", ":n+=i}return n+="</td></tr>"},t.prototype.updateCosts=function(){this.calculateModels(),this.calculateWounds(),this.calculatePoints(),this.calculatePower()},t.prototype.addModel=function(t){var e=this.unitInfo.modelTypes[t].model,s=window.list.data.data[this.faction].models[e];if(void 0!==s){var i=new n.default(e,s);this.models[e].push(i)}this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.removeModel=function(t){var e=this.unitInfo.modelTypes[t].model;this.models[e].length>1?this.models[e].pop():this.models[e]=[],this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.updateModelWargear=function(t,e,s,i){var n=this.unitInfo.modelTypes[t].model;this.models[n][e].selectedWeaponConfig[s]=i,this.updateCosts(),window.list.armyList.updateCosts(),window.list.editor.renderEdit()},t.prototype.updateAllegiance=function(t){for(var e in this.models)for(var s in this.models[e]){this.models[e][s].selectedAllegiance=t}},t.prototype.calculateModels=function(){var t=0;for(var e in this.models)t+=this.models[e].length;this.totalModels=t},t.prototype.calculateWounds=function(){var t=0;for(var e in this.models)for(var s in this.models[e])t+=this.models[e][s].modelInfo.W;this.totalWounds=t},t.prototype.calculatePoints=function(){var t=0;for(var e in this.models)for(var s in this.models[e]){var i=this.models[e][s];if(t+=i.modelInfo.Points,!i.modelInfo.PointsIncludesWargear)for(var n in i.modelInfo.Wargear)for(var o=i.selectedWeaponConfig[n]||0,a=i.modelInfo.Wargear[n][o],d=0;d<a.length;d++)t+=window.list.data.data[this.faction].wargear[a[d]].Points}this.totalPoints=t},t.prototype.calculatePower=function(){for(var t=0,e=this.unitInfo.power.length-1;e>=0;e--)if(this.totalModels>=this.unitInfo.power[e][0]){t=this.unitInfo.power[e][1];break}this.totalPower=t},t.prototype.setupDefaultModels=function(){for(var t in this.unitInfo.modelTypes){var e=this.unitInfo.modelTypes[t].model;this.models[e]=[];var s=window.list.data.data[this.faction].models[e];if(void 0!==s)for(var i=0;i<this.unitInfo.modelTypes[t].defaultAmount;i++){var o=new n.default(e,s);this.models[e].push(o)}}},t}();s.default=o},{"../objects/model":9}],12:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default={supportedFactions:["Craftworlds","Harlequins","Ynnari"]}},{}],13:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function t(){this.costs=[0,0,0,0],this.pointsElement=document.getElementById("POINTS"),this.powerElement=document.getElementById("POWER"),this.woundsElement=document.getElementById("WOUNDS"),this.modelsElement=document.getElementById("MODELS")}return t.prototype.init=function(){this.updateCosts()},t.prototype.updateCostsExt=function(t){this.costs[0]=t[0],this.costs[1]=t[1],this.costs[2]=t[2],this.costs[3]=t[3],this.updateCosts()},t.prototype.updateCosts=function(){this.pointsElement.innerHTML='<div class="costValue">'+this.costs[0]+"</div>POINTS",this.powerElement.innerHTML='<div class="displayedCostSmall">Power: '+this.costs[1]+"</div>",this.woundsElement.innerHTML='<div class="displayedCostSmall">Wounds: '+this.costs[2]+"</div>",this.modelsElement.innerHTML='<div class="displayedCostSmall">Models: '+this.costs[3]+"</div>"},t}();s.default=i},{}]},{},[4])(4)});
//# sourceMappingURL=listbuilder.min.js.map
